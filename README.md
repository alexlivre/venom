# üï∑Venom Botüï∏

[![vers√£o npm](https://img.shields.io/npm/v/venom-bot.svg?color=green)](https://www.npmjs.com/package/venom-bot)
![Node](https://img.shields.io/node/v/venom-bot)
[![Downloads](https://img.shields.io/npm/dm/venom-bot.svg)](https://www.npmjs.com/package/venom-bot)
[![Tempo m√©dio para resolver problemas](http://isitmaintained.com/badge/resolution/orkestral/venom.svg)](http://isitmaintained.com/project/orkestral/venom 'Tempo m√©dio para resolver problemas')
[![Percentual de problemas ainda abertos](http://isitmaintained.com/badge/open/orkestral/venom.svg)](http://isitmaintained.com/project/orkestral/venom 'Percentual de problemas ainda abertos')
<a href="https://discord.gg/qCJ95FVbzR"><img src="https://img.shields.io/discord/772885202351292426?color=blueviolet&label=discord&style=flat" /></a>

[![Status de constru√ß√£o](https://img.shields.io/github/actions/workflow/status/orkestral/venom/build.yml?branch=master)](https://github.com/orkestral/venom/actions)
[![Status de Lint](https://img.shields.io/github/actions/workflow/status/orkestral/venom/lint.yml?branch=master&label=lint)](https://github.com/orkestral/venom/actions)
[![release-it](https://img.shields.io/badge/%F0%9F%93%A6%F0%9F%9A%80-release--it-e10079.svg)](https://github.com/release-it/release-it)

> O Venom √© um sistema de alto desempenho desenvolvido em JavaScript para criar um bot para o WhatsApp, com suporte para criar qualquer intera√ß√£o, como atendimento ao cliente, envio de m√≠dia, reconhecimento de frases com base em intelig√™ncia artificial e todos os tipos de arquitetura de design para WhatsApp.

## Comece r√°pido e f√°cil! API oficial!

<p align="center">
  <a href="https://docs.orkestral.io/venom">Documenta√ß√£o completa</a>
</p>

<p>
√â uma API de alternativa de alto desempenho para o Whatzapp, voc√™ pode enviar mensagens de texto, arquivos, imagens, v√≠deos e muito mais.
</p>
<p>
Lembre-se, a API foi desenvolvida em uma plataforma chamada Servi√ßos da Web RESTful, fornecendo interoperabilidade entre sistemas de computador na Internet.
</p>
<p>
 Ele usa um conjunto de opera√ß√µes bem definidas que se aplicam a todos os recursos de informa√ß√£o: HTTP em si define um pequeno conjunto de opera√ß√µes, as mais importantes s√£o POST, GET, PUT e DELETE.
</p>
<p>
 Use-a na sua linguagem preferida como PHP, Python, C# e outras. Contanto que sua linguagem seja suportada pelo protocolo HTTP, voc√™ economizar√° tempo e dinheiro. Voc√™ n√£o precisa saber como o Venom funciona, temos a documenta√ß√£o completa da API, de uma forma profissional!
</p>

## Obtenha a nossa API oficial Venom! Fale conosco!
<a target="_blank" href="https://web.whatsapp.com/send?phone=5561985290357&text=Quero%20ter%20acesso%20%C3%A0%20API%20Venom" target="_blank"><img title="whatzapp" height="100" width="375" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/WhatsApp_logo.svg/2000px-WhatsApp_logo.svg.png"></a>

## Grupo de suporte Venom no Telegram
<a target="_blank" href="https://t.me/joinchat/G8wxNXidWBo1ZDYx" target="_blank"><img title="Telegram" height="100" width="375" src="https://user-images.githubusercontent.com/66584466/117182238-7d1d8980-adac-11eb-9a70-e32f90c3d4e5.png"></a>

## Grupo de suporte Venom no Discord
<a target="_blank" href="https://discord.gg/uBRjk6vecs" target="_blank"><img title="Discord" height="110" width="375" src="https://s2.glbimg.com/GUbCgnBxJERAmuaYcrjBzTXD5ws=/0x0:800x272/984x0/smart/filters:strip_icc()/i.s3.glbimg.com/v1/AUTH_63b422c2caee4269b8b34177e8876b93/internal_photos/bs/2021/d/N/zJs579QOGxKVRxfPILCA/discord-app.png"></a>

## Conhe√ßa os SuperChats

<br>
<a href='https://github.com/orkestral/superchats'><img src='https://github.com/orkestral/superchats/raw/main/img/superchats.png' height='60' alt='SuperChats' aria-label='https://github.com/orkestral/superchats' /></a>
<br>
<br>

**SuperChats** √© uma biblioteca premium com recursos exclusivos que controlam as fun√ß√µes do Whatsapp com socket. Com Superchats, voc√™ pode criar chatbots de servi√ßo, chats multisservi√ßos ou qualquer sistema que use o Whatsapp.

**Superchats** √© uma vers√£o premium do **Venom**, com recursos exclusivos e suporte para empresas e desenvolvedores em todo o mundo.

<br>
<a href='https://github.com/orkestral/superchats'>https://github.com/orkestral/superchats</a>

## Compre a licen√ßa do Superchats

O valor da licen√ßa √© de $50 d√≥lares mensais, para comprar, entre em contato pelo Whatsapp clicando na imagem abaixo!!

<a target="_blank" href="https://web.whatsapp.com/send?phone=5561985290357&text=Quero%20comprar%201%20licen%C3%A7a" target="_blank"><img title="whatzapp" height="100" width="375" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/WhatsApp_logo.svg/2000px-WhatsApp_logo.svg.png"></a>

## üï∑üï∑ Fun√ß√µes do Venomüï∑üï∑

|                                                               |     |
| ------------------------------------------------------------- | --- |
| üöª Atualiza√ß√£o autom√°tica do QR                               | ‚úî   |
| üìÅ Envie **texto, imagem, v√≠deo, √°udio e documentos**         | ‚úî   |
| üë• Obtenha **contatos, conversas, grupos, membros de grupo, lista de bloqueios** | ‚úî   |
| üìû Envie contatos                                              | ‚úî   |
| Enviar bot√µes                                                  | ‚úî   |
| Enviar adesivos                                                | ‚úî   |
| Enviar adesivos GIF                                            | ‚úî   |
| M√∫ltiplas sess√µes                                              | ‚úî   |
| ‚è© Encaminhar mensagens                                        | ‚úî   |
| üì• Receber mensagem                                            | ‚úî   |
| üë§ Inserir se√ß√£o de usu√°rio                                    | ‚úî   |
| üìç Enviar localiza√ß√£o!!                                        | ‚úî   |
| üï∏üï∏ **e muito mais**                                           | ‚úî   |

Documenta√ß√£o em https://orkestral.github.io/venom/index.html

## Instala√ß√£o

```bash
> npm i --save venom-bot
```

ou para [Releases Noturnas] (https://github.com/orkestral/venom/releases/tag/nightly):

```bash
> npm i --save https://github.com/orkestral/venom/releases/download/nightly/venom-bot-nightly.tgz
```

Instalando o reposit√≥rio atual "voc√™ pode baixar a vers√£o beta do reposit√≥rio atual!"

```bash
> npm i github:orkestral/venom
```

## Primeiros passos

```javascript
// Supports ES6
// import { create, Whatsapp } from 'venom-bot';
const venom = require('venom-bot');

venom
  .create({
    session: 'session-name' //name of session
  })
  .then((client) => start(client))
  .catch((erro) => {
    console.log(erro);
  });

function start(client) {
  client.onMessage((message) => {
    if (message.body === 'Hi' && message.isGroupMsg === false) {
      client
        .sendText(message.from, 'Welcome Venom üï∑')
        .then((result) => {
          console.log('Result: ', result); //return object success
        })
        .catch((erro) => {
          console.error('Error when sending: ', erro); //return object error
        });
    }
  });
}
```

##### Ap√≥s executar a fun√ß√£o `create()`, o **venom** criar√° uma inst√¢ncia do whatsapp web. Se voc√™ n√£o estiver conectado, ele imprimir√° um c√≥digo QR no terminal. Digitalize-o com seu telefone e voc√™ estar√° pronto para come√ßar!

##### O Venom lembrar√° da sess√£o para que n√£o haja necessidade de autentica√ß√£o sempre.

##### V√°rias sess√µes podem ser criadas ao mesmo tempo passando um nome de sess√£o para a fun√ß√£o `create()`:

```javascript
// Init sales whatsapp bot
venom.create('sales').then((salesClient) => {...});

// Init support whatsapp bot
venom.create('support').then((supportClient) => {...});
```

<br>

## Par√¢metros opcionais de cria√ß√£o

O terceiro par√¢metro do m√©todo `create()` do Venom pode ter os seguintes par√¢metros opcionais:

Se voc√™ estiver usando o servidor `Linux`, n√£o se esque√ßa de passar os argumentos `--user-agent`
[Par√¢metros originais em browserArgs](https://github.com/orkestral/venom/blob/master/src/config/puppeteer.config.ts)

```javascript
(bloco de c√≥digo omitido-c16b59)
```

## Status de retorno de sess√£o de callback

Retorna se a sess√£o est√° `isLogged` ou `notLogged` ou `browserClose` ou `qrReadSuccess` ou `qrReadFail` ou `autocloseCalled` ou  `desconnectedMobile` ou `deleteToken` ou `chatsAvailable` ou `deviceNotConnected` ou `serverWssNotConnected` ou `noOpenBrowser` or `initBrowser` or `openBrowser` or `connectBrowserWs` or `initWhatsapp` or `erroPageWhatsapp` or `successPageWhatsapp` or `waitForLogin` or `waitChat` or `successChat` or `Create session wss return "serverClose" case server for close`

| Status                  | Condi√ß√£o                                                                                                                                                          |
| ----------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `isLogged`              | Quando o usu√°rio j√° est√° conectado no navegador                                                                                                                 |
| `notLogged`             | Quando o usu√°rio n√£o est√° conectado no navegador, √© necess√°rio escanear o c√≥digo QR pelo celular na op√ß√£o WhatsApp Web                                        |
| `browserClose`          | Se o navegador for fechado, esse par√¢metro √© retornado                                                                                                           |
| `qrReadSuccess`         | Se o usu√°rio n√£o estiver conectado, o c√≥digo QR √© mostrado no terminal e um retorno √© passado. Ap√≥s a leitura correta pelo celular, esse par√¢metro √© retornado    |
| `qrReadFail`            | Se o navegador parar quando o c√≥digo QR estiver em processo de escaneamento, este par√¢metro ser√° retornado                                                      |
| `autocloseCalled`       | O navegador foi fechado usando o comando `autoClose`                                                                                                             |
| `desconnectedMobile`    | O cliente desconectou-se em rela√ß√£o ao celular                                                                                                                    |
| `serverClose`           | O cliente desconectou-se em rela√ß√£o ao wss                                                                                                                        |
| `deleteToken`           | Se voc√™ passar verdadeiro dentro da fun√ß√£o                                                                                                                        |
| `chatsAvailable`        | Quando Venom est√° conectado √† lista de chats                                                                                                                      |
| `deviceNotConnected`    | Chat indispon√≠vel porque o celular n√£o est√° conectado `(tentando se conectar ao celular)`                                                                        |
| `serverWssNotConnected` | O endere√ßo wss n√£o foi encontrado!                                                                                                                                |
| `noOpenBrowser`         | N√£o foi encontrado no navegador, ou algum comando est√° faltando em args                                                                                           |
| `initBrowser`           | Iniciando o navegador                                                                                                                                              |
| `openBrowser`           | O navegador foi aberto com sucesso!                                                                                                                               |
| `connectBrowserWs`      | Conex√£o com o BrowserWs realizada com sucesso!                                                                                                                    |
| `initWhatsapp`          | Iniciando o whatsapp!                                                                                                                                              |
| `erroPageWhatsapp`      | Erro ao acessar a p√°gina do whatsapp                                                                                                                               |
| `successPageWhatsapp`   | P√°gina do Whatsapp acessada com sucesso.                                                                                                                           |
| `waitForLogin`          | Aguardando verifica√ß√£o de login!                                                                                                                                   |
| `waitChat`              | Aguardando o chat carregar                                                                                                                                        |
| `successChat`           | Chat carregado com sucesso!                                                                                                                                        |

```javascript
const venom = require('venom-bot');
venom
  .create('sessionName', undefined, (statusSession, session) => {
    console.log('Status Session: ', statusSession);
    //return isLogged || notLogged || browserClose || qrReadSuccess || qrReadFail || autocloseCalled || desconnectedMobile || deleteToken || chatsAvailable || deviceNotConnected || serverWssNotConnected || noOpenBrowser || initBrowser || openBrowser || connectBrowserWs || initWhatsapp || erroPageWhatsapp || successPageWhatsapp || waitForLogin || waitChat || successChat
    //Create session wss return "serverClose" case server for close
    console.log('Session name: ', session);
  })
  .then((client) => {
    start(client);
  })
  .catch((erro) => {
    console.log(erro);
  });
```

## Exportando QR Code

Por padr√£o, o c√≥digo QR aparecer√° no terminal. Se voc√™ precisar passar o QR
para outro lugar, aqui est√° como:

```javascript
const fs = require('fs');
const venom = require('venom-bot');

venom
  .create(
    'sessionName',
    (base64Qr, asciiQR, attempts, urlCode) => {
      console.log(asciiQR); // Optional to log the QR in the terminal
      var matches = base64Qr.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/),
        response = {};

      if (matches.length !== 3) {
        return new Error('Invalid input string');
      }
      response.type = matches[1];
      response.data = new Buffer.from(matches[2], 'base64');

      var imageBuffer = response;
      require('fs').writeFile(
        'out.png',
        imageBuffer['data'],
        'binary',
        function (err) {
          if (err != null) {
            console.log(err);
          }
        }
      );
    },
    undefined,
    { logQR: false }
  )
  .then((client) => {
    start(client);
  })
  .catch((erro) => {
    console.log(erro);
  });
```

## Baixando arquivos

Puppeteer se encarrega do download do arquivo. A descriptografia √© feita o mais r√°pido poss√≠vel (supera os m√©todos nativos). Suporta arquivos grandes!

```javascript
import fs = require('fs');
import mime = require('mime-types');

client.onMessage( async (message) => {
  if (message.isMedia === true || message.isMMS === true) {
    const buffer = await client.decryptFile(message);
    // At this point you can do whatever you want with the buffer
    // Most likely you want to write it into a file
    const fileName = `some-file-name.${mime.extension(message.mimetype)}`;
    await fs.writeFile(fileName, buffer, (err) => {
      ...
    });
  }
});
```

## Fun√ß√µes b√°sicas (uso)

N√£o est√£o listadas todas as fun√ß√µes dispon√≠veis. Para mais informa√ß√µes, todas as fun√ß√µes
dispon√≠veis podem ser encontradas [aqui](/src/api/layers) e
[aqui](/src/lib/wapi/functions)

### Conversando

##### Aqui, `chatId` pode ser `<phoneNumber>@c.us` ou `<phoneNumber>-<groupId>@g.us`

```javascript

// Send Poll
const poll = {
  name: 'new poll',
  options: [
    {
      name: 'option 1'
    },
    {
      name: 'option 2'
    }
  ],
  selectableOptionsCount: 1
};
await client.sendPollCreation('000000000000@c.us', poll)
.then((result) => {
    console.log('Result: ', result); //return object success
})
.catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
});

// Send List menu
const list = [
    {
      title: "Pasta",
      rows: [
        {
          title: "Ravioli Lasagna",
          description: "Made with layers of frozen cheese",
        }
      ]
    },
    {
      title: "Dessert",
      rows: [
        {
          title: "Baked Ricotta Cake",
          description: "Sweets pecan baklava rolls",
        },
        {
          title: "Lemon Meringue Pie",
          description: "Pastry filled with lemonand meringue.",
        }
      ]
    }
  ];

await client.sendListMenu('000000000000@c.us', 'Title', 'subTitle', 'Description', 'menu', list)
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send Messages with Buttons Reply
const buttons = [
  {
    "buttonText": {
      "displayText": "Text of Button 1"
      }
    },
  {
    "buttonText": {
      "displayText": "Text of Button 2"
      }
    }
  ]
await client.sendButtons('000000000000@c.us', 'Title', buttons, 'Description')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });
// Send audio file MP3
await client.sendVoice('000000000000@c.us', './audio.mp3').then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send audio file base64
await client.sendVoiceBase64('000000000000@c.us', base64MP3)
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send contact
await client
  .sendContactVcard('000000000000@c.us', '111111111111@c.us', 'Name of contact')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send a list of contact cards
await client
  .sendContactVcardList('000000000000@c.us', [
    '111111111111@c.us',
    '222222222222@c.us',
  ])
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send basic text
await client
  .sendText('000000000000@c.us', 'üëã Hello from venom!')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send location
await client
  .sendLocation('000000000000@c.us', '-13.6561589', '-69.7309264', 'Brasil')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Automatically sends a link with the auto generated link preview. You can also add a custom message to be added.
await client
  .sendLinkPreview(
    '000000000000@c.us',
    'https://www.youtube.com/watch?v=V1bFr2SWP1I',
    'Kamakawiwo ole'
  )
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send image (you can also upload an image using a valid HTTP protocol)
await client
  .sendImage(
    '000000000000@c.us',
    'path/to/img.jpg',
    'image-name',
    'Caption text'
  )
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });


// Send image file base64
await client.sendImageFromBase64('000000000000@c.us', base64Image, "name file")
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Send file (venom will take care of mime types, just need the path)
// you can also upload an image using a valid HTTP protocol
await client
  .sendFile(
    '000000000000@c.us',
    'path/to/file.pdf',
    'file_name',
    'See my file in pdf'
  )
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Sends file
// base64 parameter should have mime type already defined
await client
  .sendFileFromBase64(
    '000000000000@c.us',
    base64PDF,
    'file_name.pdf',
    'See my file in pdf'
  )
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Generates sticker from the provided animated gif image and sends it (Send image as animated sticker)
// image path imageBase64 A valid gif and webp image is required. You can also send via http/https (http://www.website.com/img.gif)
await client
  .sendImageAsStickerGif('000000000000@c.us', './image.gif')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Generates sticker from given image and sends it (Send Image As Sticker)
// image path imageBase64 A valid png, jpg and webp image is required. You can also send via http/https (http://www.website.com/img.jpg)
await client
  .sendImageAsSticker('000000000000@c.us', './image.jpg')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Forwards messages
await client.forwardMessages(
  '000000000000@c.us',
  ['false_000000000000@c.us_B70847EE89E22D20FB86ECA0C1B11609','false_000000000000@c.us_B70847EE89E22D20FB86ECA0C1B11777']
).then((result) => {
    console.log('Result: ', result); //return object success
})
.catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
});

// Send @tagged message
await client.sendMentioned(
  '000000000000@c.us',
  'Hello @5218113130740 and @5218243160777!',
  ['5218113130740', '5218243160777']
);

// Reply to a message
await client.reply(
  '000000000000@c.us',
  'This is a reply!',
  'true_551937311025@c.us_7C22WHCB6DKYHJKQIEN9'
).then((result) => {
    console.log('Result: ', result); //return object success
}).catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
});

// Send message with options
await client.
        .sendMessageOptions(
          '000000000000@c.us',
          'This is a reply!',
           {
              quotedMessageId: reply,
            }
        )
        .then((retorno) => {
          resp = retorno;
        })
        .catch((e) => {
          console.log(e);
        });

// Send gif
await client.sendVideoAsGif(
  '000000000000@c.us',
  'path/to/video.mp4',
  'video.gif',
  'Gif image file'
);

//checks and returns whether a message and a reply
// exemple:
// await client.onMessage(async (message) => {
//     console.log(await client.returnReply(message)); // replicated message
//     console.log(message.body ); //customer message
//   })
checkReply = await client.returnReply(messagem);

// Send seen ‚úîÔ∏è‚úîÔ∏è
await client.sendSeen('000000000000@c.us');

// Start typing...
await client.startTyping('000000000000@c.us');

// Stop typing
await client.stopTyping('000000000000@c.us');

// Set chat state (0: Typing, 1: Recording, 2: Paused)
await client.setChatState('000000000000@c.us', 0 | 1 | 2);
```

## Recuperando dados

```javascript
// Retrieve all chats
const chats = await client.getAllChats();

//Retrieves all chats new messages
const chatsAllNew = getAllChatsNewMsg();

//Retrieves all chats Contacts
const contacts = await client.getAllChatsContacts();

//Retrieve all contacts new messages
const contactNewMsg = await client.getChatContactNewMsg();

// Retrieve all groups
// you can pass the group id optional use, exemple: client.getAllChatsGroups('00000000-000000@g.us')
const chats = await client.getAllChatsGroups();

//Retrieve all groups new messages
const groupNewMsg = await client.getChatGroupNewMsg();

//Retrieves all chats Transmission list
const transmission = await client.getAllChatsTransmission();

// Retrieve contacts
const contacts = await client.getAllContacts();

// Returns a list of mute and non-mute users
// "all" List all mutes
// "toMute" List all silent chats
// "noMute" List all chats without silence
const listMute = await client.getListMute('all');

// Calls your list of blocked contacts (returns an array)
const getBlockList = await client.getBlockList();

// Retrieve messages in chat
//chatID chat id
//includeMe will be by default true, if you do not want to pass false
//includeNotifications will be by default true, if you do not want to pass false
//const Messages = await client.getAllMessagesInChat(chatID, includeMe, includeNotifications)
const Messages = await client.getAllMessagesInChat('000000000000@c.us');

// Retrieve more chat message
const moreMessages = await client.loadEarlierMessages('000000000000@c.us');

// Retrieve all messages in chat
const allMessages = await client.loadAndGetAllMessagesInChat(
  '000000000000@c.us'
);

// Retrieve contact status
const status = await client.getStatus('000000000000@c.us');

// Retrieve user profile
const user = await client.getNumberProfile('000000000000@c.us');

// Retrieve all unread message
const messages = await client.getUnreadMessages();

// Retrieve profile fic (as url)
const url = await client.getProfilePicFromServer('000000000000@c.us');

// Retrieve chat/conversation
const chat = await client.getChat('000000000000@c.us');

// Check if the number exists
const chat = await client
  .checkNumberStatus('000000000000@c.us')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });
```

## Fun√ß√µes de Grupo

```javascript
// groupId or chatId: leaveGroup 52123123-323235@g.us

//change group description
await client
  .setGroupDescription('00000000-000000@g.us', 'group description')
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Leave group
await client.leaveGroup('00000000-000000@g.us');

// Get group members
await client.getGroupMembers('00000000-000000@g.us');

// Get group members ids
await client.getGroupMembersIds('00000000-000000@g.us');

// Generate group invite url link
await client.getGroupInviteLink('00000000-000000@g.us');

// Create group (title, participants to add)
await client.createGroup('Group name', [
  '111111111111@c.us',
  '222222222222@c.us'
]);

// Remove participant
await client.removeParticipant('00000000-000000@g.us', '111111111111@c.us');

// Add participant
await client.addParticipant('00000000-000000@g.us', '111111111111@c.us');

// Promote participant (Give admin privileges)
await client.promoteParticipant('00000000-000000@g.us', '111111111111@c.us');

// Demote particiapnt (Revoke admin privileges)
await client.demoteParticipant('00000000-000000@g.us', '111111111111@c.us');

// Get group admins
await client.getGroupAdmins('00000000-000000@g.us');

// Return the group status, jid, description from it's invite link
await client.getGroupInfoFromInviteLink(InviteCode);

// Join a group using the group invite code
await client.joinGroup(InviteCode);
```

## Fun√ß√µes de Perfil

```javascript
// Set client status
await client.setProfileStatus('On vacations! ‚úàÔ∏è');

// Set client profile name
await client.setProfileName('Venom bot');

// Set client profile photo
await client.setProfilePic('path/to/image.jpg');

// Get device info
await client.getHostDevice();
```

## Fun√ß√µes de dispositivo

```javascript
// Disconnect from service
await client.logout();

// Delete the Service Worker
await client.killServiceWorker();

// Load the service again
await client.restartService();

// Get connection state
await client.getConnectionState();

// Get battery level
await client.getBatteryLevel();

// Is connected
await client.isConnected();

// Get whatsapp web version
await client.getWAVersion();
```

## Eventos

```javascript

//Listens to all new messages
//To receiver or recipient
client.onAnyMessage(message => {
  ...
};

// Listen to messages
client.onMessage(message => {
  ...
})

// Listen to state changes
client.onStateChange(state => {
  ...
});

// Listen to ack's
// See the status of the message when sent.
// When receiving the confirmation object, "ack" may return a number, look {@link AckType} for details:
// -7 = MD_DOWNGRADE,
// -6 = INACTIVE,
// -5 = CONTENT_UNUPLOADABLE,
// -4 = CONTENT_TOO_BIG,
// -3 = CONTENT_GONE,
// -2 = EXPIRED,
// -1 = FAILED,
//  0 = CLOCK,
//  1 = SENT,
//  2 = RECEIVED,
//  3 = READ,
//  4 = PLAYED =

client.onAck(ack => {
  ...
});

// Listen to live location
// chatId: 'phone@c.us'
client.onLiveLocation("000000000000@c.us", (liveLocation) => {
  ...
});

// chatId looks like this: '5518156745634-1516512045@g.us'
// Event interface is in here: https://github.com/s2click/venom/blob/master/src/api/model/participant-event.ts
client.onParticipantsChanged("000000000000@c.us", (event) => {
  ...
});

// Listen when client has been added to a group
client.onAddedToGroup(chatEvent => {
  ...
});
```

## Outros

```javascript
//Check if there is chat
await client
  .checkChat(chatId)
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Pin chat and Unpin chat messages with true or false
// Pin chat, non-existent (optional)
await client
  .pinChat(chatId, true, false)
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

///mute a contact
await client
  .sendMute(
    '000000000000@c.us', //contact mute
    30, //duration of silence, example: 30 minutes
    'minutes' ///kind of silence "hours" "minutes" "year"
  )
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

///unmute contact
await client
  .sendMute(
    '000000000000@c.us' //contact unmute
  )
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Change the theme
// string types "dark" or "light"
await client.setTheme('dark');

// Receive the current theme
// returns string light or dark
await client.getTheme();

// Delete chat
await client.deleteChat('000000000000@c.us');

// Clear chat messages
await client.clearChatMessages('000000000000@c.us');

// Archive and unarchive chat messages with true or false
await client.archiveChat(chatId, true);

// Delete message (last parameter: delete only locally)
await client
  .deleteMessage('000000000000@c.us', [
    'false_000000000000@c.us_B70847EE89E22D20FB86ECA0C1B11609',
    'false_000000000000@c.us_B70847EE89E22D20FB86ECA0C1B11777'
  ])
  .then((result) => {
    console.log('Result: ', result); //return object success
  })
  .catch((erro) => {
    console.error('Error when sending: ', erro); //return object error
  });

// Mark chat as not seen (returns true if it works)
await client.markUnseenMessage('000000000000@c.us');

// Blocks a user (returns true if it works)
await client.blockContact('000000000000@c.us');

// Unlocks contacts (returns true if it works)
await client.unblockContact('000000000000@c.us');
```

## Misc

Existem alguns truques para um melhor uso do venom.

#### Mantenha a sess√£o ativa:

```javascript
// function to detect conflits and change status
// Force it to keep the current session
// Possible state values:
// CONFLICT
// CONNECTED
// DEPRECATED_VERSION
// OPENING
// PAIRING
// PROXYBLOCK
// SMB_TOS_BLOCK
// TIMEOUT
// TOS_BLOCK
// UNLAUNCHED
// UNPAIRED
// UNPAIRED_IDLE
client.onStateChange((state) => {
  console.log('State changed: ', state);
  // force whatsapp take over
  if ('CONFLICT'.includes(state)) client.useHere();
  // detect disconnect on whatsapp
  if ('UNPAIRED'.includes(state)) console.log('logout');
});

// DISCONNECTED
// SYNCING
// RESUMING
// CONNECTED
let time = 0;
client.onStreamChange((state) => {
  console.log('State Connection Stream: ' + state);
  clearTimeout(time);
  if (state === 'DISCONNECTED' || state === 'SYNCING') {
    time = setTimeout(() => {
      client.close();
    }, 80000);
  }
});

// function to detect incoming call
client.onIncomingCall(async (call) => {
  console.log(call);
  client.sendText(call.peerJid, "Sorry, I still can't answer calls");
});
```

#### Fechando (salvando) sess√µes

Feche a sess√£o corretamente para garantir que a sess√£o seja salva para a pr√≥xima vez que voc√™ fizer login (para n√£o pedir outra verifica√ß√£o QR). Ent√£o, em vez do CTRL + C,

```javascript
// Catch ctrl+C
process.on('SIGINT', function() {
  client.close();
});

// Try-catch close
try {
   ...
} catch (error) {
   client.close();
}
```

### Fechando automaticamente sess√µes n√£o sincronizadas

O fechamento autom√°tico √© ativado por padr√£o e o tempo limite √© definido como 60 segundos.
Recebe o tempo em milissegundos para fazer a contagem regressiva at√© ser pareado.

Use "autoClose: 0 | false" para desativar o fechamento autom√°tico.

### Depura√ß√£o

## Desenvolvimento

A constru√ß√£o do venom √© realmente simples, embora contenha 3 projetos principais dentro

1. Projeto Wapi

```bash
> npm run build:wapi
```

2. Middleware

```bash
> npm run build:middleware
> npm run build:jsQR
```

3. Venom

```bash
> npm run build:venom
```

Para construir todo o projeto, execute

```bash
> npm run build
```

## Mantenedores

Mantenedores s√£o necess√°rios, n√£o consigo acompanhar todas as atualiza√ß√µes sozinho. Se voc√™ estiver interessado, abra um Pull Request.

## Contribuindo

Pull requests s√£o bem-vindos. Para mudan√ßas importantes, por favor, abra uma issue primeiro para
discutir o que voc√™ gostaria de alterar.
